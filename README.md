# 礼包接口说明

---

#### - 环境配置

> 测试环境

[http://192.168.1.21:5000](http://192.168.1.21:5000)

> STG环境

[http://stg.dlifx.cn:5000](http://stg.dlifx.cn:5000)

> 正式环境

| 游戏 | 域名 |
| :--- | :--- |
| 牛元帅 | [http://106.75.146.158:5000](http://106.75.146.158:5000) |
| 牛总管 | [http://106.75.146.158:5000](http://106.75.146.158:5000) |
| 一定牛 | [http://106.75.146.158:5000](http://106.75.146.158:5000) |
| 炸金花 | [http://10.13.186.120:5000](http://10.13.186.120:5000) |
| 十三水 | [http://10.13.186.120:5000](http://10.13.186.120:5000) |
| 吉祥三公 | [http://10.13.186.120:5000](http://10.13.186.120:5000) |
| 顶级牛 | [http://10.13.186.120:5000](http://10.13.186.120:5000) |

#### - 状态码说明

| 状态码 | 说明 |
| :--- | :--- |
| 0 | 成功 |
| -1 | 失败 |
| 1000 | 接口不存在 |
| 1001 | 签名错误 |
| 1002 | 代理UID错误\(代理账户\) |
| 1003 | 产品ID错误 |
| 1004 | 游戏ID错误 |
| 1005 | 时间戳错误 |
| 1006 | 签名错误 |
| 1007 | 订单类型错误 |
| 1008 | 充值用户ID错误\(游戏ID\) |
| 20001 | 请求方法无效 |

#### - API列表

1. 创建订单

**接口地址:**

> /order/create/{game-symbol}

**请求方式**

> application/x-www-form-urlencoded

**请求方法:**

> POST

**请求参数:**

| 参数 | 类型 | 是否必要 | 备注 |
| :--- | :--- | :--- | :--- |
| type | int | 是 | 订单类型 |
| agent\_uid | int | 是 | 代理用户ID |
| refill\_uid | int | 是 | 充值用户ID |
| good\_id | int | 是 | 产品ID |
| timestamp | int | 是 | 请求时间戳 |
| sign | string | 是 | 参数签名 |

订单类型说明：

| type | 说明 |
| :--- | :--- |
| 1 | 代理给自己游戏账户充值 |
| 2 | 代理给其他游戏账户充值 |

签名算法说明：

```
/**
* 生成签名
*
* @param array $data 签名数据
* @param string $key 签名key
* @return string
*/
public static function makeSign( $data = array(), $key = "" ) {
ksort($data);
$dataStr = http_build_query($data);
$signStr = $dataStr . "&key=" . $key;

return md5($signStr);
}
```

**接口返回说明:**

成功：

```
{
"ret": 0,
"msg": "success",
"data": {
"trade_no": "1066153672443938186"
}
}
```

失败

```
{
"ret": 1008,
"msg": "invalid refill_uid"
}
```
